@tailwind base;
@tailwind components;
@tailwind utilities;

/* Inject Tailwind's base styles and define theme variables */
@layer base {
  /* Light Theme Colors */
  :root {
    --color-bg-primary: 249 250 251; /* Tailwind gray-50 */
    --color-bg-secondary: 255 255 255; /* White */
    --color-text-primary: 31 41 55; /* Tailwind gray-800 */
    --color-text-secondary: 107 114 128; /* Tailwind gray-500 */
    --color-border: 229 231 235; /* Tailwind gray-200 */
    --color-accent-default: 79 70 229; /* Tailwind indigo-600 */
    --color-accent-hover: 67 56 202; /* Tailwind indigo-700 */
    --color-success: 16 185 129; /* Tailwind emerald-500 */
    --color-warning: 245 158 11; /* Tailwind amber-500 */
    --color-error: 239 68 68; /* Tailwind red-500 */

    /* Dark Theme Colors */
    --color-bg-primary-dark: 17 24 39; /* Tailwind gray-900 */
    --color-bg-secondary-dark: 31 41 55; /* Tailwind gray-800 */
    --color-text-primary-dark: 249 250 251; /* Tailwind gray-50 */
    --color-text-secondary-dark: 156 163 175; /* Tailwind gray-400 */
    --color-border-dark: 55 65 81; /* Tailwind gray-700 */
    --color-accent-default-dark: 99 102 241; /* Tailwind indigo-400 */
    --color-accent-hover-dark: 79 70 229; /* Tailwind indigo-500 */
    --color-success-dark: 16 185 129; /* Tailwind emerald-500 */
    --color-warning-dark: 245 158 11; /* Tailwind amber-500 */
    --color-error-dark: 239 68 68; /* Tailwind red-500 */
  }

  /* Apply dark theme variables when .dark class is present on html element */
  .dark {
    --color-bg-primary: var(--color-bg-primary-dark);
    --color-bg-secondary: var(--color-bg-secondary-dark);
    --color-text-primary: var(--color-text-primary-dark);
    --color-text-secondary: var(--color-text-secondary-dark);
    --color-border: var(--color-border-dark);
    --color-accent-default: var(--color-accent-default-dark);
    --color-accent-hover: var(--color-accent-hover-dark);
    --color-success: var(--color-success-dark);
    --color-warning: var(--color-warning-dark);
    --color-error: var(--color-error-dark);
  }

  body {
    /* Use CSS variables with rgb() and alpha for Tailwind-like utility */
    background-color: rgb(var(--color-bg-primary) / 1);
    color: rgb(var(--color-text-primary) / 1);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden; /* Keep as per your original */
    transition: background-color 0.3s, color 0.3s; /* Smooth theme transition */
  }

  code {
    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
      monospace;
  }

  /* Custom scrollbar using theme variables */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: rgb(var(--color-bg-secondary) / 1);
  }
  .dark ::-webkit-scrollbar-track {
    background-color: rgb(var(--color-bg-secondary-dark) / 1);
  }

  ::-webkit-scrollbar-thumb {
    background-color: rgb(209 213 219 / 1); /* Tailwind gray-300 */
    border-radius: 9999px; /* Full rounded */
  }
  .dark ::-webkit-scrollbar-thumb {
    background-color: rgb(75 85 99 / 1); /* Tailwind gray-600 */
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: rgb(156 163 175 / 1); /* Tailwind gray-400 */
  }
  .dark ::-webkit-scrollbar-thumb:hover {
    background-color: rgb(107 114 128 / 1); /* Tailwind gray-500 */
  }

  /* Loading Spinner */
  .spinner {
    border: 4px solid rgb(0 0 0 / 0.1);
    border-left-color: rgb(var(--color-accent-default) / 1);
    border-style: solid;
    border-radius: 50%;
    width: 2.5rem; /* 40px */
    height: 2.5rem; /* 40px */
    animation: spin 1s linear infinite;
  }
  .dark .spinner {
    border: 4px solid rgb(255 255 255 / 0.1);
  }
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* Loading Dots */
  .loading-dots span {
    width: 0.5rem; /* 8px */
    height: 0.5rem; /* 8px */
    background-color: rgb(var(--color-text-secondary) / 1); /* Light theme color */
    border-radius: 50%;
    display: inline-block;
    margin-right: 0.5rem; /* 8px */
    animation: bounce 1.5s infinite ease-in-out both;
  }
  .dark .loading-dots span {
    background-color: rgb(var(--color-text-secondary-dark) / 1); /* Dark theme color */
  }
  .loading-dots span:nth-child(1) {
    animation-delay: -0.32s;
  }
  .loading-dots span:nth-child(2) {
    animation-delay: -0.16s;
  }
  @keyframes bounce {
    0%, 80%, 100% {
      transform: scale(0);
    }
    40% {
      transform: scale(1.0);
    }
  }
}

/* Ensure full height for app */
#root {
  min-height: 100vh;
}